<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Sniper Poker</title>
    <!-- Use the consolidated stylesheet -->
    <link rel="stylesheet" href="style.css">
</head>
<body>
    <div id="lobby" class="screen">
        <!-- Wrap the lobby controls in an overlay to improve readability on the poker themed background -->
        <div class="lobby-overlay">
            <h1>Sniper Poker</h1>
            <p class="description">Play a custom "sniper" variant of poker. <br> Create a game or join an existing one by its ID.</p>
            <input type="text" id="nameInput" placeholder="Enter your name" autofocus>
            <div class="lobby-actions">
                <button id="createGameBtn">Create Game</button>
                <div class="join-area">
                    <input type="text" id="gameIdInput" placeholder="Game ID">
                    <button id="joinGameBtn">Join Game</button>
                </div>
            </div>
            <div id="lobbyStatus" class="status"></div>
            <!-- Container to insert the start game button when the host is ready -->
            <div id="startGameContainer"></div>
            <!-- Instructions for Sniper Poker -->
            <div class="instructions">
                <h3>Setup</h3>
                <ul>
                    <li><strong>Players:</strong> 2-9 players.</li>
                    <li><strong>Starting Stack:</strong> Each player begins with 60 chips.</li>
                    <li><strong>The Deck:</strong> A 40‑card deck with four copies of each number from 1 to 10. There are no suits.</li>
                </ul>
                <h3>Hand Rankings</h3>
                <p>Since there are no suits in Sniper Poker, flushes and straight flushes are impossible. Hands rank as follows (highest to lowest):</p>
                <ul>
                    <li><strong>Four of a Kind</strong></li>
                    <li><strong>Full House</strong></li>
                    <li><strong>Straight</strong></li>
                    <li><strong>Three of a Kind</strong></li>
                    <li><strong>Two Pair</strong></li>
                    <li><strong>One Pair</strong></li>
                    <li><strong>High Card</strong></li>
                </ul>
                <h3>New Gameplay: A Round of Sniper Poker</h3>
                <p>A hand of Sniper Poker unfolds over <strong>three</strong> betting rounds before the critical sniping phase:</p>
                <ul>
                    <li><strong>The Pre‑Flop:</strong> Players receive two private hole cards and enter a round of betting, starting with the small (1) and big blinds (2).</li>
                    <li><strong>The Flop (2 Cards):</strong> Two community cards are dealt face up. This triggers the <em>second</em> betting round, starting with the first active player to the left of the dealer.</li>
                    <li><strong>The Turn (2 Cards):</strong> Two more community cards are dealt face up, bringing the total community cards to four (there is no river). This triggers the <em>third and final</em> betting round.</li>
                    <li><strong>The Sniping Phase:</strong> After the final betting round, starting with the last player who bet or raised, each player takes turns to declare a combination (along with the highest ranking card in the combination) to <em>snipe</em> (for example, “I snipe 10-high straight" or "I snipe 9-high two pair"). Anyone with that combination during the showdown including the sniper, cannot use it to win the pot.</li>
                    <li><strong>The Showdown:</strong> Players reveal their hole cards and form their best five‑card hand using any combination of their two hole cards and the four community cards. The highest ranking non‑sniped hand wins the pot.</li>
                </ul>
            </div>
        </div>
    </div>

    <div id="game" class="screen" style="display:none;">
        <div id="statusBar">
            <span><strong>You:</strong> <span id="playerName"></span></span>
            <span>| Chips: <span id="playerChips"></span></span>
            <span>| Pot: <span id="pot"></span></span>
            <span>| Phase: <span id="phase"></span></span>
        </div>
        <!-- New poker table wrapper for players and community cards -->
        <div id="tableWrapper">
            <div id="pokerTable">
                <!-- Community cards will be inserted here -->
                <div id="communityCards" class="community-cards"></div>
                <!-- Pot value display positioned under the community cards -->
                <div id="potCenter" class="pot-center"></div>
            </div>
        </div>
        <!-- Action buttons and controls -->
        <div id="actionArea" class="action-area">
            <button id="callBtn" disabled>Call</button>
            <button id="raiseBtn" disabled>Raise</button>
            <!-- The raise amount input and confirm/cancel controls are hidden until Raise is clicked -->
            <input type="number" id="raiseAmount" placeholder="Amount" min="1" value="1" style="display:none;" disabled>
            <button id="confirmRaiseBtn" style="display:none;">Confirm Raise</button>
            <button id="cancelRaiseBtn" style="display:none;">Cancel</button>
            <button id="foldBtn" disabled>Fold</button>
            <button id="snipeBtn" style="display:none;">Declare Snipe</button>
            <input type="text" id="snipeInput" placeholder="e.g. 6-7-8-9-10" style="display:none;">
            <select id="snipeComboSelect" style="display:none;">
                <!-- The first option allows players to explicitly declare that they are not sniping any combination. -->
                <option value="">No combination sniped</option>
                <option value="7">Four of a Kind</option>
                <option value="6">Full House</option>
                <option value="5">Straight</option>
                <option value="4">Three of a Kind</option>
                <option value="3">Two Pair</option>
                <option value="2">Pair</option>
                <option value="1">High Card</option>
            </select>
            <select id="snipeHighSelect" style="display:none;">
                <!-- The first option allows players to skip choosing a high card when not sniping a combo. -->
                <option value="">No highest ranking card sniped</option>
                <option value="1">1</option>
                <option value="2">2</option>
                <option value="3">3</option>
                <option value="4">4</option>
                <option value="5">5</option>
                <option value="6">6</option>
                <option value="7">7</option>
                <option value="8">8</option>
                <option value="9">9</option>
                <option value="10">10</option>
            </select>
            <button id="submitSnipeBtn" style="display:none;">Submit Snipe</button>
            <!-- Button for calling time on another player. It will be shown when appropriate during a hand. -->
            <button id="callTimeBtn" style="display:none;">Call Time</button>
        </div>
        <!-- Area to display declared snipes -->
        <div id="snipesDisplay" class="snipes-display"></div>
        <!-- Area to show messages like outcome and timers -->
        <div id="messageArea" class="message-area"></div>
    </div>
    <!-- Load the consolidated game logic -->
    <script type="module" src="main.js"></script>
</body>
</html>
